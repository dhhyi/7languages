language:
  name: factor
  binary: factor
  binaryArgs: -run
  repl: factor
  version: factor </dev/null ; echo
devcontainer:
  name: "7 more languages in 7 weeks: Factor"
  build:
    args:
      FACTOR_VERSION: "0.98"
      WORKSPACE: "${containerWorkspaceFolder}"
    root:
      - ADD https://downloads.factorcode.org/releases/${FACTOR_VERSION}/factor-linux-x86-64-${FACTOR_VERSION}.tar.gz /opt/factor.tar.gz
      - RUN cd /opt && tar zxpf factor.tar.gz
      - ENV PATH=/opt/factor:${PATH}
      - RUN echo ${WORKSPACE} > ${HOME}/.factor-roots
      - COPY deploy.sh /usr/local/bin/deploy-factor-vocab
      - RUN chmod +x /usr/local/bin/deploy-factor-vocab
    user:
      - RUN echo ${WORKSPACE} > ${HOME}/.factor-roots
  selftest: |
    cat >/tmp/helloworld.factor <<EOF
    USE: io
    "Hello World!" print
    EOF
    factor -run /tmp/helloworld.factor
vscode:
  extensions:
    - dexterhaslem.factor
  script: |
    USING: io kernel math prettyprint ;

    "------------------------" print

    $1
