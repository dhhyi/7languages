language:
  name: clojure
  binary: clojure
  repl: lein repl
  binaryArgs: -M
devcontainer:
  name: '7 languages in 7 weeks: Clojure'
  settings: |
    "files.watcherExclude": {
      "**/target": true
    }
  extensions:
    - betterthantomorrow.calva
  baseImage: mcr.microsoft.com/vscode/devcontainers/java:0-17-bullseye
  rootBuild: |
    ARG CLOJURE_VERSION=1.11.1.1155
    RUN cd /tmp && curl -O https://download.clojure.org/install/linux-install-${CLOJURE_VERSION}.sh && chmod +x linux-install-${CLOJURE_VERSION}.sh
    RUN /tmp/linux-install-${CLOJURE_VERSION}.sh

    RUN cd /usr/local/bin && curl -O https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein && chmod +x lein

    RUN echo > /conda-notice.txt
  selftest: clojure -M -e '(println "Hello World!")'
vscode:
  script: |
    (ns ${TM_FILENAME/^(.*).clj$/$1/}
      (:gen-class))
    (println \"----------------\")

    $1
